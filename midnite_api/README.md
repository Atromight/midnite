# Table of Contents
- [Endpoints](#endpoints)
    * [GET /events](#get-events)
    * [POST /event](#post-event)
- [Running Locally](#running-locally)


# Description

The midnite_api is a [**FastAPI**](https://fastapi.tiangolo.com/) service that enables 
recording and tracking of events of users. An event is essentially a financial transaction 
that a user makes (withdraw or deposit) in our system.

The objective of this API is to monitor the activity of users and throw alerts, based on the users actions. 
Below are the possible alert codes currently supported:
* Code 1100: A withdraw amount over 100
* Code 30: 3 consecutive withdraws
* Code 300: 3 consecutive increasing deposits (ignoring withdraws)
* Code 123: Accumulative deposit amount over a window of 30 seconds is over 200

### Endpoints
Currently, the API supports 2 endpoints:
#### GET /events
Returns the information for all recorded events (transactions).
#### POST /event
Records a new event (transaction) and returns potential alert codes.


### Running Locally

Use Makefile to run the application locally.
```
make run
```

Once the app is running, you can interact with the API at http://localhost:5000/

For example, if you want to make a POST request and record a new event while the app is running, 
you can do it from your terminal by using the following curl command:
```
curl -XPOST http://127.0.0.1:5000/event -H 'Content-Type: application/json' -d '{"type": "deposit", "amount": "62.00", "user_id": 13, "t": 2}'
```

You can also view the autogenerated API documentation in the Swagger UI at http://localhost:5000/docs

